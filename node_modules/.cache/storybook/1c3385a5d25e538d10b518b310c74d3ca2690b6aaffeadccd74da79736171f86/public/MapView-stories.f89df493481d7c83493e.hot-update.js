"use strict";
self["webpackHotUpdatedsc"]("MapView-stories",{

/***/ "./src/components/MapView.tsx":
/*!************************************!*\
  !*** ./src/components/MapView.tsx ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_leaflet__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-leaflet */ "./node_modules/react-leaflet/lib/hooks.js");
/* harmony import */ var react_leaflet__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-leaflet */ "./node_modules/react-leaflet/lib/MapContainer.js");
/* harmony import */ var react_leaflet__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-leaflet */ "./node_modules/react-leaflet/lib/TileLayer.js");
/* harmony import */ var react_leaflet__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react-leaflet */ "./node_modules/react-leaflet/lib/Polyline.js");
/* harmony import */ var react_leaflet__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react-leaflet */ "./node_modules/react-leaflet/lib/Marker.js");
/* harmony import */ var leaflet__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! leaflet */ "./node_modules/leaflet/dist/leaflet-src.js");
/* harmony import */ var leaflet__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(leaflet__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var leaflet_dist_leaflet_css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! leaflet/dist/leaflet.css */ "./node_modules/leaflet/dist/leaflet.css");
/* harmony import */ var _MapView_css__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./MapView.css */ "./src/components/MapView.css");





const vehicleData = [
    {
        id: 1,
        position: [
            37.5665,
            126.9780
        ],
        info: '차량 1: 상세 정보',
        time: '2024-08-01 10:00',
        description: '과속 사건',
        path: [
            [
                37.5651,
                126.9782
            ],
            [
                37.5660,
                126.9785
            ],
            [
                37.5665,
                126.9780
            ]
        ] // 차량 이동 경로
    },
    {
        id: 2,
        position: [
            37.5765,
            126.9880
        ],
        info: '차량 2: 상세 정보',
        time: '2024-08-03 11:00',
        description: '사고 다발지역',
        path: [
            [
                37.5750,
                126.9885
            ],
            [
                37.5760,
                126.9882
            ],
            [
                37.5765,
                126.9880
            ]
        ]
    },
    {
        id: 3,
        position: [
            37.5865,
            126.9980
        ],
        info: '차량 3: 상세 정보',
        time: '2024-08-04 12:00',
        description: '사고 다발지역',
        path: [
            [
                37.5850,
                126.9985
            ],
            [
                37.5860,
                126.9982
            ],
            [
                37.5865,
                126.9980
            ]
        ]
    }
];
const getCustomIcon = (description)=>{
    let iconUrl = '/icons/default_icon.png';
    if (description.includes('사고 다발지역')) {
        iconUrl = '/icons/accident_icon.png';
    } else if (description.includes('과속 사건')) {
        iconUrl = '/icons/speeding_icon.png';
    } else if (description.includes('주차 위반')) {
        iconUrl = '/icons/parking_violation_icon.png';
    }
    return new (leaflet__WEBPACK_IMPORTED_MODULE_1___default().Icon)({
        iconUrl,
        iconSize: [
            50,
            50
        ],
        iconAnchor: [
            25,
            50
        ]
    });
};
const SetViewOnLoad = ({ coords, zoom })=>{
    const map = (0,react_leaflet__WEBPACK_IMPORTED_MODULE_4__.useMap)();
    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{
        map.setView(coords, zoom);
    }, [
        map,
        coords,
        zoom
    ]);
    return null;
};
const MapView = ()=>{
    const [searchQuery, setSearchQuery] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)('');
    const [filteredData, setFilteredData] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(vehicleData);
    const handleSearch = ()=>{
        if (searchQuery.trim() === '') {
            setFilteredData(vehicleData);
        } else {
            const queryLowerCase = searchQuery.toLowerCase();
            setFilteredData(vehicleData.filter((vehicle)=>vehicle.info.toLowerCase().includes(queryLowerCase) || vehicle.description.toLowerCase().includes(queryLowerCase) || vehicle.time.includes(queryLowerCase)));
        }
    };
    // 기본 위치 설정 (예: 서울)
    const defaultCoords = [
        37.5665,
        126.9780
    ];
    const defaultZoom = 13;
    return /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {
        className: "map-view-container"
    }, /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {
        className: "map-view-header"
    }, /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {
        className: "search-bar"
    }, /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_0___default().createElement("input", {
        type: "text",
        placeholder: "차량 정보, 시간 또는 설명으로 검색",
        value: searchQuery,
        onChange: (e)=>setSearchQuery(e.target.value),
        onKeyPress: (e)=>e.key === 'Enter' && handleSearch()
    }), /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_0___default().createElement("button", {
        onClick: handleSearch
    }, "검색"))), /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {
        className: "map-view-content"
    }, /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {
        className: "map-view-map"
    }, /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(react_leaflet__WEBPACK_IMPORTED_MODULE_5__.MapContainer, {
        style: {
            height: "80vh",
            width: "100%"
        }
    }, /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(SetViewOnLoad, {
        coords: filteredData.length > 0 ? filteredData[0].position : defaultCoords,
        zoom: defaultZoom
    }), /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(react_leaflet__WEBPACK_IMPORTED_MODULE_6__.TileLayer, {
        url: "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
    }), filteredData.map((vehicle)=>/*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(react_leaflet__WEBPACK_IMPORTED_MODULE_7__.Polyline, {
            key: `path-${vehicle.id}`,
            positions: vehicle.path,
            color: "red",
            weight: 4,
            dashArray: "4 12" // 점선 설정
        }), /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(react_leaflet__WEBPACK_IMPORTED_MODULE_8__.Marker, {
            key: vehicle.id,
            position: vehicle.position,
            icon: getCustomIcon(vehicle.description)
        }))))), /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {
        className: "map-view-sidebar"
    }, /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_0___default().createElement("h2", null, "검색 결과"), /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_0___default().createElement("ul", {
        className: "map-view-results"
    }, filteredData.length > 0 ? filteredData.map((vehicle)=>/*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_0___default().createElement("li", {
            key: vehicle.id
        }, /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_0___default().createElement("strong", null, vehicle.info), /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_0___default().createElement("p", null, vehicle.time), /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_0___default().createElement("p", null, vehicle.description))) : /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_0___default().createElement("p", null, "검색 결과가 없습니다.")))));
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MapView);


/***/ })

});
//# sourceMappingURL=MapView-stories.f89df493481d7c83493e.hot-update.js.map